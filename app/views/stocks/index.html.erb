<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
  <div class="flex justify-between items-center border-b border-gray-200 pb-5 mb-8">
    <h1 class="text-3xl font-bold text-gray-900">Stock Management</h1>
    <%= link_to 'Add New Item', new_stock_path, class: "bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md" %>
  </div>

  <div class="bg-white shadow overflow-hidden sm:rounded-lg">
    <table class="min-w-full divide-y divide-gray-200">
      <thead class="bg-gray-100">
        <tr>
          <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-900 uppercase tracking-wider">Name</th>
          <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-900 uppercase tracking-wider">Category</th>
          <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-900 uppercase tracking-wider">Quantity</th>
          <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-900 uppercase tracking-wider">Min Quantity</th>
          <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-900 uppercase tracking-wider">Expiry Date</th>
          <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-900 uppercase tracking-wider">Actions</th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-gray-200">
        <% if @stocks.any? %>
          <% @stocks.each do |stock| %>
            <tr class="hover:bg-gray-50">
              <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"><%= stock.name %></td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"><%= stock.category %></td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                <%= stock.quantity || 0 %>
                <% if stock.quantity.present? && stock.minimum_quantity.present? && stock.quantity <= stock.minimum_quantity %>
                  <span class="ml-2 px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">Low</span>
                <% end %>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"><%= stock.minimum_quantity || 0 %></td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                <%= stock.expiry_date&.strftime("%B %d, %Y") %>
                <% if stock.expiry_date && stock.expiry_date <= 30.days.from_now %>
                  <span class="ml-2 px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">Expiring Soon</span>
                <% end %>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                <%= link_to 'Edit', edit_stock_path(stock), class: "text-blue-600 hover:text-blue-900 mr-3" %>
                <%= button_to 'Delete', stock_path(stock), method: :delete, class: "text-red-600 hover:text-red-900 inline", form: { data: { turbo_confirm: 'Are you sure?' } } %>
              </td>
            </tr>
          <% end %>
        <% else %>
          <tr>
            <td colspan="6" class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center">No stock items found</td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div> 